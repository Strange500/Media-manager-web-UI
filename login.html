<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <title>Login</title>
</head>
<body style="background-color: #000b25">
    <div style="text-align: center" ><img src="https://jellyfin.org/images/logo.svg" alt="JellyFin logo" style="position:absolute;height: 30vh;width: 30vh; ">
  <input type="text" id="user" placeholder="Enter your JellyFin username" style="margin-top: 30vh;background-color: #172138">

        <button  id="bt_user" style="background-color: #172138">Connect</button>
  <div id="res" class="off" style="color: red">User does not exist.</div>
    </div>

  <script>

    const url = "http://82.65.222.143:8080/"
    const bt = document.getElementById("bt_user")
    const res = document.getElementById("res")

    function is_user() {
      let user = document.getElementById("user")
      let req = user.value
      fetch(url+"is_user/?u="+req)
              .then(response => response.text())
              .then( response => JSON.parse(response))
              .then(data => {
                  console.log("here")
                if (data["is_user"] === true) {

                    location.replace("index.html")
                }
                else {
                  res.classList.add("on")
                    res.classList.remove("off")
                }
              })

    }

    bt.addEventListener("click", function () {
      console.log('ok')
      is_user();
            }
    )



  </script>
</body>
</html>